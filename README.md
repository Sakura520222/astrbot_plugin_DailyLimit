# ğŸš€ AstrBot æ—¥è°ƒç”¨é™åˆ¶æ’ä»¶ v2.4.1

<div align="center">

![Version](https://img.shields.io/badge/ç‰ˆæœ¬-v2.4.1-blue)
![AstrBot](https://img.shields.io/badge/AstrBot-3.5.1%2B-green)
![Python](https://img.shields.io/badge/Python-3.10%2B-yellow)
![License](https://img.shields.io/badge/License-MIT-orange)

**æ™ºèƒ½ç®¡ç†AIèµ„æºä½¿ç”¨ï¼Œé˜²æ­¢æ»¥ç”¨ï¼Œæå‡ç”¨æˆ·ä½“éªŒ**

[![Star](https://img.shields.io/github/stars/left666/astrbot_plugin_daily_limit?style=social)](https://github.com/left666/astrbot_plugin_daily_limit)

</div>

## ğŸ“– ç®€ä»‹

AstrBot æ—¥è°ƒç”¨é™åˆ¶æ’ä»¶æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„AIèµ„æºç®¡ç†å·¥å…·ï¼Œä¸“ä¸ºAstrBotè®¾è®¡ã€‚é€šè¿‡æ™ºèƒ½çš„æ¯æ—¥è°ƒç”¨é™åˆ¶æœºåˆ¶ï¼Œæœ‰æ•ˆé˜²æ­¢å¤§æ¨¡å‹APIçš„æ»¥ç”¨ï¼Œç¡®ä¿AIæœåŠ¡çš„ç¨³å®šæ€§å’Œå…¬å¹³æ€§ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ›¡ï¸ æ™ºèƒ½é™åˆ¶ç³»ç»Ÿ
- **å¤šçº§æƒé™ç®¡ç†**ï¼šç”¨æˆ·ã€ç¾¤ç»„ã€è±å…ç”¨æˆ·ä¸‰çº§æƒé™ä½“ç³»
- **æ—¶é—´æ®µé™åˆ¶**ï¼šæ”¯æŒæŒ‰æ—¶é—´æ®µè®¾ç½®ä¸åŒçš„è°ƒç”¨é™åˆ¶
- **ä¼˜å…ˆçº§è§„åˆ™**ï¼šè±å…ç”¨æˆ· > æ—¶é—´æ®µé™åˆ¶ > ç”¨æˆ·é™åˆ¶ > ç¾¤ç»„é™åˆ¶ > é»˜è®¤é™åˆ¶

### ğŸ‘¥ ç¾¤ç»„åä½œæ¨¡å¼
- **å…±äº«æ¨¡å¼**ï¼šç¾¤ç»„æˆå‘˜å…±äº«ä½¿ç”¨æ¬¡æ•°ï¼ˆé»˜è®¤ï¼‰
- **ç‹¬ç«‹æ¨¡å¼**ï¼šç¾¤ç»„å†…æ¯ä¸ªæˆå‘˜ç‹¬ç«‹è®¡æ•°ï¼ˆv2.2æ–°å¢ï¼‰
- **æ™ºèƒ½åˆ‡æ¢**ï¼šè‡ªåŠ¨è¯†åˆ«æ¶ˆæ¯ç±»å‹ï¼Œæ— ç¼åˆ‡æ¢è®¡æ•°æ¨¡å¼

### ğŸ“Š æ•°æ®ç›‘æ§åˆ†æ
- **å®æ—¶ç›‘æ§**ï¼šä½¿ç”¨ç»Ÿè®¡ã€æ’è¡Œæ¦œå’ŒçŠ¶æ€ç›‘æ§
- **ä½¿ç”¨è®°å½•**ï¼šè¯¦ç»†è®°å½•æ¯æ¬¡è°ƒç”¨ï¼Œæ”¯æŒå†å²æŸ¥è¯¢
- **å¤šç»´åº¦åˆ†æ**ï¼šç”¨æˆ·ã€ç¾¤ç»„ã€å…¨å±€ç­‰å¤šç»´åº¦ç»Ÿè®¡åˆ†æ

### ğŸ”„ çµæ´»ç®¡ç†
- **é‡ç½®æœºåˆ¶**ï¼šæ”¯æŒç”¨æˆ·ã€ç¾¤ç»„æˆ–å…¨éƒ¨è®°å½•çš„é‡ç½®
- **é…ç½®ç®¡ç†**ï¼šçµæ´»çš„é…ç½®ç³»ç»Ÿï¼Œæ”¯æŒä¸ªæ€§åŒ–è®¾ç½®
- **Redisæ”¯æŒ**ï¼šåŸºäºRedisçš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨

### ğŸ”§ è‡ªå®šä¹‰è·³è¿‡æ¨¡å¼ (v2.4æ–°å¢)
- **æ™ºèƒ½æ¶ˆæ¯è¿‡æ»¤**ï¼šæ”¯æŒè‡ªå®šä¹‰è·³è¿‡å¤„ç†çš„æ¶ˆæ¯å‰ç¼€
- **åŠ¨æ€é…ç½®**ï¼šæ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶æˆ–ç®¡ç†å‘˜å‘½ä»¤åŠ¨æ€ç®¡ç†è·³è¿‡æ¨¡å¼
- **å‘åå…¼å®¹**ï¼šé»˜è®¤ä¿æŒä¸åŸæœ‰ç¡¬ç¼–ç é€»è¾‘çš„å…¼å®¹æ€§

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚
- **AstrBotç‰ˆæœ¬**: v3.5.1+
- **Pythonç‰ˆæœ¬**: 3.10+
- **RedisæœåŠ¡å™¨**: å¿…é¡»é…ç½®

### å®‰è£…æ­¥éª¤

1. **å®‰è£…Redisä¾èµ–**
   ```bash
   pip install redis>=4.5.0
   ```

2. **é…ç½®RedisæœåŠ¡å™¨**
   - ç¡®ä¿RedisæœåŠ¡æ­£å¸¸è¿è¡Œ
   - è®°å½•Redisè¿æ¥ä¿¡æ¯ï¼ˆä¸»æœºã€ç«¯å£ã€å¯†ç ç­‰ï¼‰

3. **å®‰è£…æ’ä»¶**
   - å°†æ’ä»¶æ–‡ä»¶æ”¾ç½®åˆ°AstrBotæ’ä»¶ç›®å½•
   - é‡å¯AstrBotæœåŠ¡

### åŸºç¡€é…ç½®

åˆ›å»ºé…ç½®æ–‡ä»¶ `astrbot_plugin_dailylimit_config.json`ï¼š

```json
{
  "redis": {
    "host": "localhost",
    "port": 6379,
    "db": 0,
    "password": ""
  },
  "limits": {
    "default_daily_limit": 20,
    "exempt_users": [],
    "group_limits": [],
    "user_limits": [],
    "group_mode_settings": [],
    "time_period_limits": []
  }
}
```

## âš™ï¸ è¯¦ç»†é…ç½®

### Redisé…ç½®
```json
"redis": {
    "host": "localhost",
    "port": 6379,
    "db": 0,
    "password": ""
}
```

### é™åˆ¶é…ç½®

#### é»˜è®¤é™åˆ¶
- `default_daily_limit`: é»˜è®¤æ¯æ—¥è°ƒç”¨æ¬¡æ•°ï¼ˆé»˜è®¤ï¼š20æ¬¡ï¼‰

#### è±å…ç”¨æˆ·
- `exempt_users`: ä¸å—é™åˆ¶çš„ç”¨æˆ·IDåˆ—è¡¨

#### ç”¨æˆ·é™åˆ¶
```json
{
    "user_id": "ç”¨æˆ·ID",
    "limit": 10
}
```

#### ç¾¤ç»„é™åˆ¶
```json
{
    "group_id": "ç¾¤ç»„ID",
    "limit": 15
}
```

#### ç¾¤ç»„æ¨¡å¼é…ç½®
```json
{
    "group_id": "ç¾¤ç»„ID",
    "mode": "shared"  // shared: å…±äº«æ¨¡å¼, individual: ç‹¬ç«‹æ¨¡å¼
}
```

#### æ—¶é—´æ®µé™åˆ¶
```json
{
    "start_time": "09:00",
    "end_time": "18:00",
    "limit": 10,
    "enabled": true
}
```

#### è·³è¿‡æ¨¡å¼é…ç½® (v2.4æ–°å¢)
```json
"skip_patterns": ["@æ‰€æœ‰äºº", "#"]
```
- **åŠŸèƒ½**ï¼šå®šä¹‰éœ€è¦è·³è¿‡å¤„ç†çš„æ¶ˆæ¯å‰ç¼€
- **é»˜è®¤å€¼**ï¼š`["@æ‰€æœ‰äºº", "#"]`ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
- **ç¤ºä¾‹**ï¼šè®¾ç½®`["!", "/"]`å¯è·³è¿‡ä»¥!æˆ–/å¼€å¤´çš„æ¶ˆæ¯

### ä¼˜å…ˆçº§è§„åˆ™

1. â° **æ—¶é—´æ®µé™åˆ¶** - ä¼˜å…ˆçº§æœ€é«˜
2. ğŸ† **è±å…ç”¨æˆ·** - å®Œå…¨ä¸å—é™åˆ¶
3. ğŸ‘¤ **ç”¨æˆ·ç‰¹å®šé™åˆ¶** - é’ˆå¯¹å•ä¸ªç”¨æˆ·
4. ğŸ‘¥ **ç¾¤ç»„ç‰¹å®šé™åˆ¶** - é’ˆå¯¹æ•´ä¸ªç¾¤ç»„
5. âš™ï¸ **é»˜è®¤é™åˆ¶** - å…¨å±€é»˜è®¤è®¾ç½®

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### ğŸ‘¤ ç”¨æˆ·å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit_status` | æŸ¥çœ‹ä¸ªäººä½¿ç”¨æƒ…å†µ | `/limit_status` |
| `/é™åˆ¶å¸®åŠ©` | æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤ | `/é™åˆ¶å¸®åŠ©` |

### ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜å‘½ä»¤

#### ğŸ”§ åŸºç¡€ç®¡ç†
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit help` | æ˜¾ç¤ºè¯¦ç»†å¸®åŠ© | `/limit help` |
| `/limit set <ç”¨æˆ·ID> <æ¬¡æ•°>` | è®¾ç½®ç”¨æˆ·é™åˆ¶ | `/limit set 123456 50` |
| `/limit setgroup <æ¬¡æ•°>` | è®¾ç½®ç¾¤ç»„é™åˆ¶ | `/limit setgroup 30` |
| `/limit setmode <shared\|individual>` | è®¾ç½®ç¾¤ç»„æ¨¡å¼ | `/limit setmode shared` |
| `/limit getmode` | æŸ¥çœ‹ç¾¤ç»„æ¨¡å¼ | `/limit getmode` |

#### â° æ—¶é—´æ®µç®¡ç†
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit timeperiod list` | åˆ—å‡ºæ—¶é—´æ®µé™åˆ¶ | `/limit timeperiod list` |
| `/limit timeperiod add <å¼€å§‹> <ç»“æŸ> <æ¬¡æ•°>` | æ·»åŠ æ—¶é—´æ®µ | `/limit timeperiod add 09:00 18:00 10` |
| `/limit timeperiod remove <ç´¢å¼•>` | åˆ é™¤æ—¶é—´æ®µ | `/limit timeperiod remove 1` |
| `/limit timeperiod enable <ç´¢å¼•>` | å¯ç”¨æ—¶é—´æ®µ | `/limit timeperiod enable 1` |
| `/limit timeperiod disable <ç´¢å¼•>` | ç¦ç”¨æ—¶é—´æ®µ | `/limit timeperiod disable 1` |

#### ğŸ›¡ï¸ è±å…ç®¡ç†
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit exempt <ç”¨æˆ·ID>` | æ·»åŠ è±å…ç”¨æˆ· | `/limit exempt 123456` |
| `/limit unexempt <ç”¨æˆ·ID>` | ç§»é™¤è±å…ç”¨æˆ· | `/limit unexempt 123456` |

#### ğŸ“Š æŸ¥è¯¢åŠŸèƒ½
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit list_user` | åˆ—å‡ºç”¨æˆ·é™åˆ¶ | `/limit list_user` |
| `/limit list_group` | åˆ—å‡ºç¾¤ç»„é™åˆ¶ | `/limit list_group` |
| `/limit stats` | æŸ¥çœ‹ä»Šæ—¥ç»Ÿè®¡ | `/limit stats` |
| `/limit history [ç”¨æˆ·ID] [å¤©æ•°]` | æŸ¥è¯¢ä½¿ç”¨å†å² | `/limit history 123456 7` |
| `/limit analytics [æ—¥æœŸ]` | å¤šç»´åº¦åˆ†æ | `/limit analytics 2025-01-23` |
| `/limit top [æ•°é‡]` | æ˜¾ç¤ºæ’è¡Œæ¦œ | `/limit top 5` |
| `/limit status` | æŸ¥çœ‹æ’ä»¶çŠ¶æ€ | `/limit status` |

#### ğŸ”„ é‡ç½®åŠŸèƒ½
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit reset all` | é‡ç½®æ‰€æœ‰è®°å½• | `/limit reset all` |
| `/limit reset <ç”¨æˆ·ID>` | é‡ç½®ç‰¹å®šç”¨æˆ· | `/limit reset 123456` |
| `/limit reset group <ç¾¤ç»„ID>` | é‡ç½®ç‰¹å®šç¾¤ç»„ | `/limit reset group 789012` |

#### ğŸ”§ è·³è¿‡æ¨¡å¼ç®¡ç† (v2.4æ–°å¢)
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/limit skip_patterns` | æŸ¥çœ‹å½“å‰è·³è¿‡æ¨¡å¼ | `/limit skip_patterns` |
| `/limit skip_patterns add <æ¨¡å¼>` | æ·»åŠ è·³è¿‡æ¨¡å¼ | `/limit skip_patterns add !` |
| `/limit skip_patterns remove <æ¨¡å¼>` | ç§»é™¤è·³è¿‡æ¨¡å¼ | `/limit skip_patterns remove #` |
| `/limit skip_patterns reset` | é‡ç½®ä¸ºé»˜è®¤æ¨¡å¼ | `/limit skip_patterns reset` |

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

### v2.4.1 (2025-10-20)
- âœ… **è‡ªå®šä¹‰è·³è¿‡æ¨¡å¼åŠŸèƒ½** - æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰éœ€è¦è·³è¿‡å¤„ç†çš„æ¶ˆæ¯å‰ç¼€
- âœ… **åŠ¨æ€é…ç½®ç®¡ç†** - æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶æˆ–ç®¡ç†å‘˜å‘½ä»¤åŠ¨æ€ç®¡ç†è·³è¿‡æ¨¡å¼
- âœ… **å‘åå…¼å®¹è®¾è®¡** - é»˜è®¤ä¿æŒä¸åŸæœ‰ç¡¬ç¼–ç é€»è¾‘çš„å…¼å®¹æ€§
- âœ… **è·³è¿‡æ¨¡å¼ç®¡ç†å‘½ä»¤** - æ–°å¢/limit skip_patternsç³»åˆ—å‘½ä»¤

### v2.3 (2025-10-18)
- âœ… **æ—¶é—´æ®µé™åˆ¶åŠŸèƒ½** - æ”¯æŒæŒ‰æ—¶é—´æ®µè®¾ç½®ä¸åŒçš„è°ƒç”¨é™åˆ¶
- âœ… **æ—¶é—´æ®µä¼˜å…ˆçº§** - æ—¶é—´æ®µé™åˆ¶ä¼˜å…ˆçº§æœ€é«˜
- âœ… **æ—¶é—´æ®µç®¡ç†å‘½ä»¤** - æ–°å¢/limit timeperiodç³»åˆ—å‘½ä»¤

### v2.2 (2025-10-17)
- âœ… **ç¾¤ç»„ç‹¬ç«‹æ¨¡å¼** - æ”¯æŒç¾¤ç»„å†…æˆå‘˜ç‹¬ç«‹ä½¿ç”¨æ¬¡æ•°
- âœ… **æ¨¡å¼åˆ‡æ¢é…ç½®** - æ”¯æŒä¸ºç‰¹å®šç¾¤ç»„å•ç‹¬é…ç½®ä½¿ç”¨æ¨¡å¼

### v2.1 (2025-10-17)
- âœ… **ä½¿ç”¨è®°å½•åŠŸèƒ½** - è‡ªåŠ¨è®°å½•æ¯æ¬¡è°ƒç”¨ï¼Œæ”¯æŒå†å²æŸ¥è¯¢
- âœ… **å¤šç»´åº¦ç»Ÿè®¡åˆ†æ** - æä¾›ç”¨æˆ·ã€ç¾¤ç»„ã€å…¨å±€ç­‰å¤šç»´åº¦åˆ†æ

### v2.0 (2025-10-16)
- âœ… **ç¾¤ç»„å…±äº«æœºåˆ¶** - ç¾¤ç»„æˆå‘˜å…±äº«ä½¿ç”¨æ¬¡æ•°
- âœ… **æ™ºèƒ½è®¡æ•°åˆ‡æ¢** - è‡ªåŠ¨è¯†åˆ«æ¶ˆæ¯ç±»å‹

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æŒ‡å—ï¼š

### ğŸš€ å¦‚ä½•è´¡çŒ®
1. **Fork ä»“åº“** - fork è¿™ä¸ªä»“åº“åˆ°æ‚¨çš„è´¦æˆ·
2. **åˆ›å»ºåˆ†æ”¯** - ä¸ºåŠŸèƒ½æˆ–ä¿®å¤åˆ›å»ºæ–°åˆ†æ”¯
3. **æäº¤æ›´æ”¹** - æäº¤æ¸…æ™°çš„æäº¤ä¿¡æ¯
4. **åˆ›å»º Pull Request** - æäº¤PRå¹¶æè¿°æ›´æ”¹

### ğŸ“‹ è´¡çŒ®è§„èŒƒ
- ç¡®ä¿ä»£ç ç¬¦åˆé¡¹ç›®ç¼–ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### ğŸ› é—®é¢˜åé¦ˆ
å¦‚é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- ğŸ“§ Telegram: [@TamakiSakura520](https://t.me/TamakiSakura520)
- ğŸ’¬ Issues: [GitHub Issues](https://github.com/left666/astrbot_plugin_daily_limit/issues)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

<div align="center">

**ğŸŒŸ å¦‚æœè¿™ä¸ªæ’ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**

</div>

## ğŸ‘¥ è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

### ğŸ† ä¸»è¦è´¡çŒ®è€…
- [left666](https://github.com/left666)

### ğŸ¤ ååŠ©è€…
- [Sakura520222](https://github.com/Sakura520222)

*æ„Ÿè°¢æ‰€æœ‰å‚ä¸æµ‹è¯•ã€åé¦ˆå’Œè´¡çŒ®çš„ç¤¾åŒºæˆå‘˜ï¼*
